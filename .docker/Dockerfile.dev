FROM golang:1.24.4

WORKDIR /app

# Install Air for hot reload
RUN go install github.com/air-verse/air@latest

# Copy go.mod/go.sum first to leverage caching
COPY go.mod go.sum ./
RUN go mod download

# Copy everything else
COPY . .

# Expose the port the API runs on
EXPOSE 4000

# Run Air using the API config
ENTRYPOINT ["air", "-c", ".air.api.toml"]
